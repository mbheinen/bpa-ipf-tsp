.. _powerflow-command-language:

********************************
Powerflow Command Language (PCL)
********************************

Introduction
============
The commands listed below are those currently available in the Powerflow Command Language (PCL). This language was developed to meet the needs of communication between the GUI and the Powerflow server (``ipfsrv``), but is also available for direct user entry via the Command Dialog in the GUI or loading of a PCL command file in the GUI, and via the ``ipfbat`` command line process, by invoking the same command file. However, since ``ipfsrv`` is expecting these commands to have been generated by another program, it expects them to be syntactically perfect and legally ordered. There is no checking of input, or confirmation procedure, or chance to edit and re-enter commands. A typo can easily crash the program.

The GUI process sends these commands in response to various button pushes, and all checking, etc. is done before a command is ever sent. The generated text strings are placed in a buffer which is sent over an interprocess communications channel open to the server process (``ipfsrv``). The server process on its end interprets these commands and responds by changing its memory resident case data, querying the case data, sending data back to the GUI, etc. CFLOW library routines also send and receive these commands in the same manner.

PCL has some overlap with the PFC command language used in the batch Powerflow (``bpf``) program. For those commands which do the same things (e.g. ``OLD_BASE``, ``CHANGES``, etc.) the syntax is identical. However, many of the batch commands are not available in PCL, and of course PCL contains many commands which are not needed by ``bpf``. The same conventions on case and spacing apply to both languages.

  * Upper, lower, or mixed case are legal: ``OLD_BASE``, ``Old_Base``, ``oldbase``.
  * Spaces between command elements are ignored: ``/oldbase,file=std.bse`` and ``/   OLD_base  ,   File   =   std.bse`` are equivalent.
  * Underscore may be used within command words if desired: ``oldbase``, ``old_base``, ``O_L_D__B_A_S_E``.

.. table:: IPC Commands Quick Descriptions

  +------------+--------------------------------------------------+-------------+
  | Command    | Description                                      | Section     |
  +============+==================================================+=============+
  | (END)      | Terminates a data stream following a command.    |             |
  +------------+--------------------------------------------------+-------------+
  | *[EOM]     | Used in the Command Dialog to launch a command   |             |
  |            | stream.                                          |             |
  +------------+--------------------------------------------------+-------------+
  | CFLOW      | Launches a CFLOW program.                        |             |
  +------------+--------------------------------------------------+-------------+
  | CHANGES    | Introduces system data change records.           |             |
  +------------+--------------------------------------------------+-------------+
  |GET_DATA    | Fetches data from the Powerﬂow process.          |             |
  +------------+--------------------------------------------------+-------------+
  | GET_DATA, TYPE = A_DATA Retrieves all type A input data records in WSCC format.
3-12
GET_DATA, TYPE = AREA_DATA Initializes the user analysis arrays. 3-13
GET_DATA, TYPE = AREA_LIST Loads the area list dialog into the Network Data Edit Dialog and the Reports Dialog.
3-13
GET_DATA, TYPE = BSEKV_LIST Loads the base kV list dialog into the Network Data Edit Dialog and Reports Dialog.
3-14
GET_DATA, TYPE = BUS_EXISTS Inquires whether a given bus exists. 3-15
GET_DATA, TYPE = BUS_LIST Loads the bus list dialog in the Alpha Search, Network Data Edit, and Reports Dialogs.
3-15
GET_DATA, TYPE = BUS_VOLTAGES Returns a list of all bus voltages. 3-16
GET_DATA, TYPE = CONNECTION Retrieves the network connection diagram for a given set of buses.
3-17
GET_DATA, TYPE = COUNT Computes the number of network data records satisfying the ﬁlter criteria in a NETWORK_DATA command.
3-18
GET_DATA, TYPE = FILE_EXISTS Inquires whether a named ﬁles exists. 3-19
GET_DATA, TYPE = INITIALIZE_DEF Initializes the user analysis arrays. 3-19
GET_DATA, TYPE = INPUT Retrieves the full network data for a bus. 3-20
GET_DATA, TYPE = I_DATA Retrieves all I type data in WSCC format. 3-19
GET_DATA, TYPE = LINE_IMPEDANCE_CALCULATION
Computes transmission line impedance data given tower geometry and conductor characteristics.
3-20
GET_DATA, TYPE = LOAD_AREA Initializes arrays associated with area interchange data.
3
GET_DATA, TYPE = SUB_DEFINE Loads the user analysis arrays. 3-39
GET_DATA, TYPE = LOAD_REF_AREA Initializes arrays associated with area interchange data.
3-22
GET_DATA, TYPE = LOAD_REF_BASE Loads a reference base case history ﬁle for the purpose of base case comparison or plot comparisons.
3-22
GET_DATA, TYPE = NETWORK_DATA Filters network data records. 3-22
GET_DATA, TYPE = OUTAGES Retrieves the list of outaged data for the Report Dialog.
3-23
GET_DATA, TYPE = OUTPUT General purpose command for accessing virtually the entire network data base.
3-23
GET_DATA, TYPE = OWNER_LIST Loads the ownership list dialog into the Reports Dialog and the Network Data Edit Dialog.
3-29
GET_DATA, TYPE = RECORD_LIST Loads the record type list dialog into the Reports Dialog and the Network Data Edit Dialog.
3-30
GET_DATA, TYPE = COMMENTS Obtains the area interchange output data from the WSCC-formatted input area records.
3-17
GET_DATA, TYPE = REF_OUTPUT General purpose command for accessing virtually the entire network data base.
3-32
GET_DATA, TYPE = STATUS Retrieves the case description. 3-39
GET_DATA, TYPE = SUB_DEFINE Performs character string substitution using computed base case quantities.
3-39
GET_DATA, TYPE = COMMENTS Retrieves all IPF system parameters describing the case in residence.
3-17
GET_DATA, TYPE = ZONE_LIST Loads the zone list dialog into the Reports Dialog and the Network Data Edit Dialog.
3-40
INITIALIZE Starts up the Powerﬂow process. 3-6
NETWORK_DATA Speciﬁes that a network data ﬁle is to be loaded into the Powerﬂow process.
3-8
NEW_BASE Saves the solved, resident base case. 3-8
OLD_BASE Loads a previously solved Powerﬂow case ﬁle. 3-8
PLOT Plots a Powerﬂow coordinate file
PUT_DATA, TYPE = COMMENTS Deﬁnes IPF system parameters which either describe the case in residence or modify parameters which will inﬂuence certain processes (solution, debugging).
3-42
QUIT, EXIT Executes closing procedures and exits the Powerﬂow process.
3-6
REPORTS, SELECT AI_SUMMARY Retrieves ﬁltered area interchange output data. 3-44
REPORTS, SELECT BUS_BR_INPUT Retrieves ﬁltered WSCC-formatted bus and branch input data records.
3-46
REPORTS, SELECT BUS_BR_OUTPUT Retrieves ﬁltered bus and branch output records.
3-47
REPORTS, SELECT BUS_INPUT Retrieves ﬁltered WSCC-formatted bus input data records.
3-45
REPORTS, SELECT BUS_UVOV Retrieves ﬁltered under/over voltage bus output data.
3-48
REPORTS, SELECT LINE_COMPARISON Retrieves ﬁltered line loading differences between the base case in residence and a selected base case history data ﬁle.
3-49
REPORTS, SELECT NETWORK_CHANGES Retrieves the list of all accumulated changes performed on the base case in residence.
3-50
REPORTS, SELECT NETWORK_DELETIONS
Retrieves the list of all deleted network data in WSCC format.
3-51
REPORTS, SELECT OVERLOADED_LINES Retrieves ﬁltered overloaded branch output data.
3-52
REPORTS, SELECT OVERLOADED_TXS Retrieves ﬁltered overloaded transformer output data.
3-53
REPORTS, SELECT PHASE_SHIFTER Retrieves the phase shifter report. 3-54
REPORTS, SELECT TIE_LINE_SUMMARY Retrieves ﬁltered area tie line ﬂows. 3-55
REPORTS, SELECT VOLTAGE_COMPARISON
Retrieves ﬁltered voltage differences between the resident base case and a selected base case history data ﬁle.
3-56
SAVE_FILE Saves the solved resident base case in a named ﬁle.
3-9
SOLUTION Causes the Powerﬂow process to solve the currently resident base case.
SYSCAL Passes a system command to the operating system.
3-7

General
=======

``(END)``
---------
Use this command to terminate a data stream following a command in a PCL command file. Some
commands which would be followed by data are ``/CHANGES, FILE=*`` and ``/PLOT``.

Example::

  /Network_Data, File = *
  B ARAPAHOA115.
  BS ARAP1 13.8 3.5 45. 1.05
  B SHERIDAN115. 41.5 11.8
  T ARAPAHOA115. ARAP1 13.8 .00672.14684.00064-00313115.5 13.2
  L ARAPAHOA115. SHERIDAN115. .00261.00657 .0004
  (end)

``*[EOM]``
----------
This is used when entering commands in the Command Dialog of the GUI, to indicated that the
line or lines you have entered into the buffer should be send to ``ipfsrv``. When the GUI generates
this "End of Message" string, it has all six characters; however, the first two characters are all that
are required to be entered.

For Command Dialog usage, this also serves in place of the ``(END)`` command above. But unlike
it, this must be entered after every command, when using the Command Dialog.

``INITIALIZE``
--------------